var e="(".charCodeAt(0),r=")".charCodeAt(0),o="'".charCodeAt(0),t='"'.charCodeAt(0),n="\\".charCodeAt(0),s="/".charCodeAt(0),d=",".charCodeAt(0),c=":".charCodeAt(0),a="*".charCodeAt(0),i=function(i){for(var h,u,l,f,A,p,C,y,v=[],g=i,w=0,x=g.charCodeAt(w),b=g.length,I=[{nodes:v}],k=0,m="",O="",q="";w<b;)if(x<=32){h=w;do{x=g.charCodeAt(h+=1)}while(x<=32);f=g.slice(w,h),l=v[v.length-1],x===r&&k?q=f:l&&"div"===l.type?l.after=f:x===d||x===c||x===s&&g.charCodeAt(h+1)!==a?O=f:v.push({type:"space",sourceIndex:w,value:f}),w=h}else if(x===o||x===t){h=w,f={type:"string",sourceIndex:w,quote:u=x===o?"'":'"'};do{if(A=!1,~(h=g.indexOf(u,h+1)))for(p=h;g.charCodeAt(p-1)===n;)p-=1,A=!A;else h=(g+=u).length-1,f.unclosed=!0}while(A);f.value=g.slice(w+1,h),v.push(f),x=g.charCodeAt(w=h+1)}else if(x===s&&g.charCodeAt(w+1)===a)f={type:"comment",sourceIndex:w},-1===(h=g.indexOf("*/",w))&&(f.unclosed=!0,h=g.length),f.value=g.slice(w+2,h),v.push(f),x=g.charCodeAt(w=h+2);else if(x===s||x===d||x===c)v.push({type:"div",sourceIndex:w-O.length,value:f=g[w],before:O,after:""}),O="",x=g.charCodeAt(w+=1);else if(e===x){h=w;do{x=g.charCodeAt(h+=1)}while(x<=32);if(f={type:"function",sourceIndex:w-m.length,value:m,before:g.slice(w+1,h)},w=h,"url"===m&&x!==o&&x!==t){h-=1;do{if(A=!1,~(h=g.indexOf(")",h+1)))for(p=h;g.charCodeAt(p-1)===n;)p-=1,A=!A;else h=(g+=")").length-1,f.unclosed=!0}while(A);C=h;do{x=g.charCodeAt(C-=1)}while(x<=32);f.nodes=w!==C+1?[{type:"word",sourceIndex:w,value:g.slice(w,C+1)}]:[],f.unclosed&&C+1!==h?(f.after="",f.nodes.push({type:"space",sourceIndex:C+1,value:g.slice(C+1,h)})):f.after=g.slice(C+1,h),x=g.charCodeAt(w=h+1),v.push(f)}else k+=1,f.after="",v.push(f),I.push(f),v=f.nodes=[],y=f;m=""}else if(r===x&&k)x=g.charCodeAt(w+=1),y.after=q,q="",k-=1,I.pop(),v=(y=I[k]).nodes;else{h=w;do{x===n&&(h+=1),x=g.charCodeAt(h+=1)}while(h<b&&!(x<=32||x===o||x===t||x===d||x===c||x===s||x===e||x===r&&k));f=g.slice(w,h),e===x?m=f:v.push({type:"word",sourceIndex:w,value:f}),w=h}for(w=I.length-1;w;w-=1)I[w].unclosed=!0;return I[0].nodes},h=function e(r,o,t){var n,s,d,c;for(n=0,s=r.length;n<s;n+=1)d=r[n],t||(c=o(d,n,r)),!1!==c&&"function"===d.type&&Array.isArray(d.nodes)&&e(d.nodes,o,t),t&&o(d,n,r)};function u(e,r){var o,t,n=e.type,s=e.value;return r&&void 0!==(t=r(e))?t:"word"===n||"space"===n?s:"string"===n?(o=e.quote||"")+s+(e.unclosed?"":o):"comment"===n?"/*"+s+(e.unclosed?"":"*/"):"div"===n?(e.before||"")+s+(e.after||""):Array.isArray(e.nodes)?(o=l(e.nodes),"function"!==n?o:s+"("+(e.before||"")+o+(e.after||"")+(e.unclosed?"":")")):s}function l(e,r){var o,t;if(Array.isArray(e)){for(o="",t=e.length-1;~t;t-=1)o=u(e[t],r)+o;return o}return u(e,r)}var f=l,A="-".charCodeAt(0),p="+".charCodeAt(0),C=".".charCodeAt(0),y="e".charCodeAt(0),v="E".charCodeAt(0);function g(e){return this instanceof g?(this.nodes=i(e),this):new g(e)}g.prototype.toString=function(){return Array.isArray(this.nodes)?f(this.nodes):""},g.prototype.walk=function(e,r){return h(this.nodes,e,r),this},g.unit=function(e){for(var r,o=0,t=e.length,n=!1,s=-1,d=!1;o<t;){if((r=e.charCodeAt(o))>=48&&r<=57)d=!0;else if(r===y||r===v){if(s>-1)break;s=o}else if(r===C){if(n)break;n=!0}else{if(r!==p&&r!==A)break;if(0!==o)break}o+=1}return s+1===o&&o--,!!d&&{number:e.slice(0,o),unit:e.slice(o)}},g.walk=h,g.stringify=f;var w=g;process=function(e){return w(e)};
